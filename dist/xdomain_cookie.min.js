(function(a){var b=function(g,q,p,v,s,t){if(g.substr(0,2)==="//"){g=(window.location.protocol==="https:"?"https:":"http:")+g}var z=q||"xdsc",x=v||(1000*6),k=false,A=false,l=[],u={},e=new Date().getTime(),i=30,y=!!p,n=!!s,f=!!t;function o(){if(!f){return}arguments[0]=":XDC_PAGE: "+arguments[0];console.log.apply(console,arguments)}function d(D){o("_inbound_postmessage",D.origin,D.data);var C=D.origin||D.originalEvent.origin;if(g.substr(0,C.length)!==C){return}if(typeof D.data!=="string"){return}var E=null;try{E=JSON.parse(D.data)}catch(F){}if(typeof E!=="object"||(E instanceof Array)){return}if(!("msg_type" in E)||E.msg_type!=="xdsc_read"){return}if(!("namespace" in E)||E.namespace!==z){return}u=E.cookies;k=true;h()}function j(){o("_iframe_load_error_occured");A=true;h()}function w(C){l.push(C);h()}function h(){if(!A&&!k){return}while(l.length>0){l.pop()(A)}}function c(F){var D=F+"=";var C=document.cookie.split(";");for(var E=0;E<C.length;E++){var G=C[E].trim();if(G.indexOf(D)===0){return decodeURIComponent(G.substring(D.length,G.length))}}return""}function r(F,G,D){D=D||i;o("_get_xdomain_cookie_value A",F);function E(J,H,I){o("_get_xdomain_cookie_value D",J,H);if(typeof I==="function"){I(H)}}if(!y){var C=c(F);if(C){o("_get_xdomain_cookie_value B",C);w(function(H){E(!H,C)});return G(C)}}w(function(H){o("_get_xdomain_cookie_value C",H);if(H){return E(false,null,G)}var I=F in u?u[F]:null;E(!H,I,G)})}window.addEventListener("message",d);var m=document.createElement("iframe");m.style.display="none";m.id="xdomain_cookie_"+e;var B={namespace:z,window_origin:window.location.origin,iframe_origin:g,debug:f};m.src=g+"/xdomain_cookie.html#"+encodeURIComponent(JSON.stringify(B));document.body.appendChild(m);o("creating iframe",m.src);setTimeout(function(){if(!k){j()}},x);return{get:r,}};a.xDomainCookie=b})(this);